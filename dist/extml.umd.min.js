!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).extml={})}(this,(function(e){"use strict";var t=function(e,n,s,r){var l;n[0]=0;for(var i=1;i<n.length;i++){var o=n[i++],u=n[i]?(n[0]|=o?1:2,s[n[i++]]):n[++i];3===o?r[0]=u:4===o?r[1]=Object.assign(r[1]||{},u):5===o?(r[1]=r[1]||{})[n[++i]]=u:6===o?r[1][n[++i]]+=u+"":o?(l=e.apply(u,t(e,u,s,["",null])),r.push(l),u[0]?n[0]|=2:(n[i-2]=0,n[i]=l)):r.push(u)}return r},n=new Map;function s(e){var s=n.get(this);return s||(s=new Map,n.set(this,s)),(s=t(this,s.get(e)||(s.set(e,s=function(e){for(var t,n,s=1,r="",l="",i=[0],o=function(e){1===s&&(e||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?i.push(0,e,r):3===s&&(e||r)?(i.push(3,e,r),s=2):2===s&&"..."===r&&e?i.push(4,e,0):2===s&&r&&!e?i.push(5,0,!0,r):s>=5&&((r||!e&&5===s)&&(i.push(s,0,r,n),s=6),e&&(i.push(s,e,0,n),s=6)),r=""},u=0;u<e.length;u++){u&&(1===s&&o(),o(u));for(var c=0;c<e[u].length;c++)t=e[u][c],1===s?"<"===t?(o(),i=[i],s=3):r+=t:4===s?"--"===r&&">"===t?(s=1,r=""):r=t+r[0]:l?t===l?l="":r+=t:'"'===t||"'"===t?l=t:">"===t?(o(),s=1):s&&("="===t?(s=5,n=r,r=""):"/"===t&&(s<5||">"===e[u][c+1])?(o(),3===s&&(i=i[0]),s=i,(i=i[0]).push(2,0,s),s=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(o(),s=2):r+=t),3===s&&"!--"===r&&(s=4,i=i[0])}return o(),i}(e)),s),arguments,[])).length>1?s:s[0]}const r="extml-style-";function l(){if(!this.stylesheet)return;let e=this.getId(),t=document.createElement("style");t.id=r+e,t.innerHTML=function(e,t){if("string"!=typeof e)return;let n=t.replace(/\w/g,"");return(e=e.replace(/<\/?style>/g,"").replace(/{/g,"{\n").replace(/}/g,"}\n").replace(/^(\s+)?:(component)(\s+)?{/gm,t+" {").replace(/:(component)/g,"").replace(/(@(?:[\w-]+-)?keyframes\s+)([\w-_]+)/g,`$1 ${n}-$2`).replace(/((?:[\w-]+-)?animation(?:-name)?(?:\s+)?:(?:\s+))([\w-_]+)/g,`$1 ${n}-$2`).replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/gm,"").replace(/\S.*{/gm,(e=>{if(/^(@|:host|(from|to|\d+%)[^-_])/.test(e))return e;let n=e.split(",");const s=new RegExp(`^${t.replace(/[[\]]/g,"\\$&")}(\\s+)?{`);for(let e=0;e<n.length;e++)n[e]=n[e].trim(),s.test(n[e])||(/^:global/.test(n[e])?n[e]=n[e].replace(":global",""):n[e]=`${t} ${n[e]}`);return n.join(",")}))).replace(/\s{2,}/g," ").replace(/{ /g,"{").replace(/ }/g,"}").replace(/\s:/g,":").replace(/\n/g,"").trim()}(this.stylesheet,"#"+e),document.head.appendChild(t)}function i(){this.stylesheet&&document.getElementById(r+this.getId()).remove()}function o(e){return e.startsWith("on")}function u(e){return e.substring(2)}function c(e,t){let n={};return n[e]=t,n}function p(e,t){e.listeners.push(t)}function a(e,t,n,s){let r={xtype:e.toLowerCase(),listeners:[c("initialize",l),c("destroy",i)]};t=Object.assign({},t,s);for(let e in t)o(e)?p(r,c(u(e),t[e])):r[e]=t[e];return n.forEach((e=>{"string"==typeof e?(r.html||(r.html=""),r.html+=e):(r.items||(r.items=[]),r.items.push(e))})),r}function f(e,t,...n){return"style"===e?{isStyle:!0,content:n[0]||""}:"function"==typeof e?a(e.name,e(t),n,t):a(e,t,n)}e.h=function(e,...t){let n=s.bind(f)(e,...t);if(n.length>1&&n[0].isStyle){let e=n[0].content;n=n[1],n.stylesheet=e}return n}}));
