!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).extml={})}(this,(function(t){"use strict";var e=function(t,n,s,i){var o;n[0]=0;for(var r=1;r<n.length;r++){var l=n[r++],a=n[r]?(n[0]|=l?1:2,s[n[r++]]):n[++r];3===l?i[0]=a:4===l?i[1]=Object.assign(i[1]||{},a):5===l?(i[1]=i[1]||{})[n[++r]]=a:6===l?i[1][n[++r]]+=a+"":l?(o=t.apply(a,e(t,a,s,["",null])),i.push(o),a[0]?n[0]|=2:(n[r-2]=0,n[r]=o)):i.push(a)}return i},n=new Map;function s(t){var s=n.get(this);return s||(s=new Map,n.set(this,s)),(s=e(this,s.get(t)||(s.set(t,s=function(t){for(var e,n,s=1,i="",o="",r=[0],l=function(t){1===s&&(t||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?r.push(0,t,i):3===s&&(t||i)?(r.push(3,t,i),s=2):2===s&&"..."===i&&t?r.push(4,t,0):2===s&&i&&!t?r.push(5,0,!0,i):s>=5&&((i||!t&&5===s)&&(r.push(s,0,i,n),s=6),t&&(r.push(s,t,0,n),s=6)),i=""},a=0;a<t.length;a++){a&&(1===s&&l(),l(a));for(var c=0;c<t[a].length;c++)e=t[a][c],1===s?"<"===e?(l(),r=[r],s=3):i+=e:4===s?"--"===i&&">"===e?(s=1,i=""):i=e+i[0]:o?e===o?o="":i+=e:'"'===e||"'"===e?o=e:">"===e?(l(),s=1):s&&("="===e?(s=5,n=i,i=""):"/"===e&&(s<5||">"===t[a][c+1])?(l(),3===s&&(r=r[0]),s=r,(r=r[0]).push(2,0,s),s=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(l(),s=2):i+=e),3===s&&"!--"===i&&(s=4,r=r[0])}return l(),r}(t)),s),arguments,[])).length>1?s:s[0]}const i="extml-style-";function o(){if(!this.stylesheet)return;let t=this.getId(),e=document.createElement("style");e.id=i+t,e.innerHTML=function(t,e){if("string"!=typeof t)return;let n=e.replace(/\w/g,"");return(t=t.replace(/<\/?style>/g,"").replace(/{/g,"{\n").replace(/}/g,"}\n").replace(/^(\s+)?:(component)(\s+)?{/gm,e+" {").replace(/:(component)/g,"").replace(/(@(?:[\w-]+-)?keyframes\s+)([\w-_]+)/g,`$1 ${n}-$2`).replace(/((?:[\w-]+-)?animation(?:-name)?(?:\s+)?:(?:\s+))([\w-_]+)/g,`$1 ${n}-$2`).replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/gm,"").replace(/\S.*{/gm,(t=>{if(/^(@|:host|(from|to|\d+%)[^-_])/.test(t))return t;let n=t.split(",");const s=new RegExp(`^${e.replace(/[[\]]/g,"\\$&")}(\\s+)?{`);for(let t=0;t<n.length;t++)n[t]=n[t].trim(),s.test(n[t])||(/^:global/.test(n[t])?n[t]=n[t].replace(":global",""):n[t]=`${e} ${n[t]}`);return n.join(",")}))).replace(/\s{2,}/g," ").replace(/{ /g,"{").replace(/ }/g,"}").replace(/\s:/g,":").replace(/\n/g,"").trim()}(this.stylesheet,"#"+t),document.head.appendChild(e)}function r(){this.stylesheet&&document.getElementById(i+this.getId()).remove()}function l(){Ext.getApplication().context=Ext.getApplication().context||{},this.context=Ext.getApplication().context;let t=this.getController();t&&(t.context=this.context),this.contextName&&(this.context[this.contextName]={},this.context[this.contextName][this.getItemId()]=this,this.query("*").forEach((t=>{this.context[this.contextName][t.getItemId()]=t})))}function a(t){return t.startsWith("on")}function c(t){return t.substring(2)}function m(t,e){let n={};return n[t]=e,n}function p(t,e){t.listeners.push(e)}const u=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"];function h(){window.__extHtmlClass||(window.__extHtmlClass={},u.forEach((t=>function(t){let e="html-"+t;window.__extHtmlClass[e]=window.Ext.define(e,{extend:"Ext.Container",xtype:e,element:{tag:t,reference:"element"},template:[{tag:"ghost-tag",reference:"bodyElement",cls:"",uiCls:""}],getInnerHtmlElement(){let t=this,e=t.innerHtmlElement;return e&&e.dom&&e.dom.parentNode||(t.innerHtmlElement=e=Ext.Element.create({tag:"ghost-tag",cls:""}),t.getRenderTarget().appendChild(e)),e},listeners:[{initialize(){setTimeout((()=>{this.el.dom.className="",this.innerElement.dom.className="",Object.keys(this._propsAttributes).forEach((t=>{"function"==typeof this._propsAttributes[t]?this.el.dom.addEventListener(t.substring(2),this._propsAttributes[t]):this.el.dom.setAttribute(t,this._propsAttributes[t])}))}));let t=this.el.dom.childNodes[1],e=this.el.dom.childNodes[2];t.remove(),e.remove();let n=this.el.dom,s=this.innerElement.dom;!function(){for(;s.childNodes.length>0;)n.appendChild(s.childNodes[0])}(),this.innerElement.dom=this.el.dom,s.remove()}}]})}(t))))}function d(){o.apply(this),l.apply(this)}function f(){r.apply(this)}function g(t,e,n,s){let i={xtype:t.toLowerCase(),listeners:[m("initialize",d),m("destroy",f)]},o=Object.assign({},e,s),r=(o.xtype||t).startsWith("html-");if(r)i._propsAttributes=e;else for(let t in o)a(t)&&!r?p(i,m(c(t),o[t])):"controller"===t&&"function"==typeof o[t]?i[t]=o[t]():i[t]=o[t];return n.forEach((e=>{"string"==typeof e?(i.html||(i.html=""),i.html+=e):e.xtype&&["gridcolumn","column","templatecolumn","booleancolumn","checkcolumn","datecolumn","numbercolumn","rownumberer","textcolumn","treecolumn"].includes(e.xtype)?(i.columns||(i.columns=[]),i.columns.push(e)):e.xtype&&["menu"].includes(e.xtype)&&["button"].includes(t)?i.menu||(i.menu=e):(i.items||(i.items=[]),i.items.push(e))})),i}function b(t){return t=t.startsWith("ext-")?t.split("ext-")[1]:"html-"+t}function x(t,e,...n){return"style"===t?{isStyle:!0,content:n[0]||""}:"context"===t?{isContext:!0,props:e,children:n[0]}:"function"==typeof t?g(b(t.name),t(e),n,e):g(b(t),e,n)}try{window&&h()}catch(t){}t.destroy=f,t.generateHtmlClass=h,t.h=function(t,...e){let n=s.bind(x)(t,...e);if(n.length>1&&n[0].isStyle){let t=n[0].content;n=n[1],n.stylesheet=t}if(n.isContext){let t=n.props.name;n=n.children,n.contextName=t}return n},t.initialize=d}));
