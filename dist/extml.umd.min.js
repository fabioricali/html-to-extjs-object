!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).extml={})}(this,(function(t){"use strict";var e=function(t,n,s,o){var i;n[0]=0;for(var l=1;l<n.length;l++){var r=n[l++],c=n[l]?(n[0]|=r?1:2,s[n[l++]]):n[++l];3===r?o[0]=c:4===r?o[1]=Object.assign(o[1]||{},c):5===r?(o[1]=o[1]||{})[n[++l]]=c:6===r?o[1][n[++l]]+=c+"":r?(i=t.apply(c,e(t,c,s,["",null])),o.push(i),c[0]?n[0]|=2:(n[l-2]=0,n[l]=i)):o.push(c)}return o},n=new Map;function s(t){var s=n.get(this);return s||(s=new Map,n.set(this,s)),(s=e(this,s.get(t)||(s.set(t,s=function(t){for(var e,n,s=1,o="",i="",l=[0],r=function(t){1===s&&(t||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,t,o):3===s&&(t||o)?(l.push(3,t,o),s=2):2===s&&"..."===o&&t?l.push(4,t,0):2===s&&o&&!t?l.push(5,0,!0,o):s>=5&&((o||!t&&5===s)&&(l.push(s,0,o,n),s=6),t&&(l.push(s,t,0,n),s=6)),o=""},c=0;c<t.length;c++){c&&(1===s&&r(),r(c));for(var u=0;u<t[c].length;u++)e=t[c][u],1===s?"<"===e?(r(),l=[l],s=3):o+=e:4===s?"--"===o&&">"===e?(s=1,o=""):o=e+o[0]:i?e===i?i="":o+=e:'"'===e||"'"===e?i=e:">"===e?(r(),s=1):s&&("="===e?(s=5,n=o,o=""):"/"===e&&(s<5||">"===t[c][u+1])?(r(),3===s&&(l=l[0]),s=l,(l=l[0]).push(2,0,s),s=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(r(),s=2):o+=e),3===s&&"!--"===o&&(s=4,l=l[0])}return r(),l}(t)),s),arguments,[])).length>1?s:s[0]}const o="extml-style-";function i(){if(!this.stylesheet)return;let t=this.getId(),e=document.createElement("style");e.id=o+t,e.innerHTML=function(t,e){if("string"!=typeof t)return;let n=e.replace(/\w/g,"");return(t=t.replace(/<\/?style>/g,"").replace(/{/g,"{\n").replace(/}/g,"}\n").replace(/^(\s+)?:(component)(\s+)?{/gm,e+" {").replace(/:(component)/g,"").replace(/(@(?:[\w-]+-)?keyframes\s+)([\w-_]+)/g,`$1 ${n}-$2`).replace(/((?:[\w-]+-)?animation(?:-name)?(?:\s+)?:(?:\s+))([\w-_]+)/g,`$1 ${n}-$2`).replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/gm,"").replace(/\S.*{/gm,(t=>{if(/^(@|:host|(from|to|\d+%)[^-_])/.test(t))return t;let n=t.split(",");const s=new RegExp(`^${e.replace(/[[\]]/g,"\\$&")}(\\s+)?{`);for(let t=0;t<n.length;t++)n[t]=n[t].trim(),s.test(n[t])||(/^:global/.test(n[t])?n[t]=n[t].replace(":global",""):n[t]=`${e} ${n[t]}`);return n.join(",")}))).replace(/\s{2,}/g," ").replace(/{ /g,"{").replace(/ }/g,"}").replace(/\s:/g,":").replace(/\n/g,"").trim()}(this.stylesheet,"#"+t),document.head.appendChild(e)}function l(){this.stylesheet&&document.getElementById(o+this.getId()).remove()}function r(){Ext.getApplication().context=Ext.getApplication().context||{},this.context=Ext.getApplication().context;let t=this.getController();t&&(t.context=this.context),this.contextName&&(this.context[this.contextName]={},this.context[this.contextName][this.getItemId()]=this,this.query("*").forEach((t=>{this.context[this.contextName][t.getItemId()]=t})))}function c(t){return t.startsWith("on")}function u(t){return t.substring(2)}function p(t,e){let n={};return n[t]=e,n}function a(t,e){t.listeners.push(e)}function h(){i.apply(this),r.apply(this)}function m(){l.apply(this)}function f(t,e,n,s){let o={xtype:t.toLowerCase(),listeners:[p("initialize",h),p("destroy",m)]};e=Object.assign({},e,s);for(let t in e)c(t)?a(o,p(u(t),e[t])):"controller"===t&&"function"==typeof e[t]?o[t]=e[t]():o[t]=e[t];return n.forEach((t=>{"string"==typeof t?(o.html||(o.html=""),o.html+=t):t.xtype&&["gridcolumn","column","templatecolumn","booleancolumn","checkcolumn","datecolumn","numbercolumn","rownumberer","textcolumn","treecolumn"].includes(t.xtype)?(o.columns||(o.columns=[]),o.columns.push(t)):(o.items||(o.items=[]),o.items.push(t))})),o}function g(t,e,...n){return"style"===t?{isStyle:!0,content:n[0]||""}:"context"===t?{isContext:!0,props:e,children:n[0]}:"function"==typeof t?f(t.name,t(e),n,e):f(t,e,n)}t.destroy=m,t.h=function(t,...e){let n=s.bind(g)(t,...e);if(n.length>1&&n[0].isStyle){let t=n[0].content;n=n[1],n.stylesheet=t}if(n.isContext){let t=n.props.name;n=n.children,n.contextName=t}return n},t.initialize=h}));
