var e=function(t,n,r,s){var l;n[0]=0;for(var i=1;i<n.length;i++){var o=n[i++],c=n[i]?(n[0]|=o?1:2,r[n[i++]]):n[++i];3===o?s[0]=c:4===o?s[1]=Object.assign(s[1]||{},c):5===o?(s[1]=s[1]||{})[n[++i]]=c:6===o?s[1][n[++i]]+=c+"":o?(l=t.apply(c,e(t,c,r,["",null])),s.push(l),c[0]?n[0]|=2:(n[i-2]=0,n[i]=l)):s.push(c)}return s},t=new Map;function n(n){var r=t.get(this);return r||(r=new Map,t.set(this,r)),(r=e(this,r.get(n)||(r.set(n,r=function(e){for(var t,n,r=1,s="",l="",i=[0],o=function(e){1===r&&(e||(s=s.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?i.push(0,e,s):3===r&&(e||s)?(i.push(3,e,s),r=2):2===r&&"..."===s&&e?i.push(4,e,0):2===r&&s&&!e?i.push(5,0,!0,s):r>=5&&((s||!e&&5===r)&&(i.push(r,0,s,n),r=6),e&&(i.push(r,e,0,n),r=6)),s=""},c=0;c<e.length;c++){c&&(1===r&&o(),o(c));for(var u=0;u<e[c].length;u++)t=e[c][u],1===r?"<"===t?(o(),i=[i],r=3):s+=t:4===r?"--"===s&&">"===t?(r=1,s=""):s=t+s[0]:l?t===l?l="":s+=t:'"'===t||"'"===t?l=t:">"===t?(o(),r=1):r&&("="===t?(r=5,n=s,s=""):"/"===t&&(r<5||">"===e[c][u+1])?(o(),3===r&&(i=i[0]),r=i,(i=i[0]).push(2,0,r),r=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(o(),r=2):s+=t),3===r&&"!--"===s&&(r=4,i=i[0])}return o(),i}(n)),r),arguments,[])).length>1?r:r[0]}function r(){if(!this.stylesheet)return;let e=this.getId(),t=document.createElement("style");t.id="extml-style-"+e,t.innerHTML=function(e,t){if("string"!=typeof e)return;let n=t.replace(/\w/g,"");return(e=e.replace(/<\/?style>/g,"").replace(/{/g,"{\n").replace(/}/g,"}\n").replace(/^(\s+)?:(component)(\s+)?{/gm,t+" {").replace(/:(component)/g,"").replace(/(@(?:[\w-]+-)?keyframes\s+)([\w-_]+)/g,`$1 ${n}-$2`).replace(/((?:[\w-]+-)?animation(?:-name)?(?:\s+)?:(?:\s+))([\w-_]+)/g,`$1 ${n}-$2`).replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/gm,"").replace(/\S.*{/gm,(e=>{if(/^(@|:host|(from|to|\d+%)[^-_])/.test(e))return e;let n=e.split(",");const r=new RegExp(`^${t.replace(/[[\]]/g,"\\$&")}(\\s+)?{`);for(let e=0;e<n.length;e++)n[e]=n[e].trim(),r.test(n[e])||(/^:global/.test(n[e])?n[e]=n[e].replace(":global",""):n[e]=`${t} ${n[e]}`);return n.join(",")}))).replace(/\s{2,}/g," ").replace(/{ /g,"{").replace(/ }/g,"}").replace(/\s:/g,":").replace(/\n/g,"").trim()}(this.stylesheet,"#"+e),document.head.appendChild(t)}function s(){this.stylesheet&&document.getElementById("extml-style-"+this.getId()).remove()}function l(e){return e.startsWith("on")}function i(e){return e.substring(2)}function o(e,t){let n={};return n[e]=t,n}function c(e,t){e.listeners.push(t)}function u(e,t,n,u){let a={xtype:e.toLowerCase(),listeners:[o("initialize",r),o("destroy",s)]};t=Object.assign({},t,u);for(let e in t)l(e)?c(a,o(i(e),t[e])):a[e]=t[e];return n.forEach((e=>{"string"==typeof e?(a.html||(a.html=""),a.html+=e):(a.items||(a.items=[]),a.items.push(e))})),a}function a(e,t,...n){return"style"===e?{isStyle:!0,content:n[0]||""}:"function"==typeof e?u(e.name,e(t),n,t):u(e,t,n)}function p(e,...t){let r=n.bind(a)(e,...t);if(r.length>1&&r[0].isStyle){let e=r[0].content;r=r[1],r.stylesheet=e}return r}export{p as h};
