function t(){if(!this.stylesheet)return;let t=this.getId(),e=document.createElement("style");e.id="extml-style-"+t,e.innerHTML=function(t,e){if("string"!=typeof t)return;let n=e.replace(/\w/g,"");return(t=t.replace(/<\/?style>/g,"").replace(/{/g,"{\n").replace(/}/g,"}\n").replace(/^(\s+)?:(component)(\s+)?{/gm,e+" {").replace(/:(component)/g,"").replace(/(@(?:[\w-]+-)?keyframes\s+)([\w-_]+)/g,`$1 ${n}-$2`).replace(/((?:[\w-]+-)?animation(?:-name)?(?:\s+)?:(?:\s+))([\w-_]+)/g,`$1 ${n}-$2`).replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/gm,"").replace(/\S.*{/gm,(t=>{if(/^(@|:host|(from|to|\d+%)[^-_])/.test(t))return t;let n=t.split(",");const s=new RegExp(`^${e.replace(/[[\]]/g,"\\$&")}(\\s+)?{`);for(let t=0;t<n.length;t++)n[t]=n[t].trim(),s.test(n[t])||(/^:global/.test(n[t])?n[t]=n[t].replace(":global",""):n[t]=`${e} ${n[t]}`);return n.join(",")}))).replace(/\s{2,}/g," ").replace(/{ /g,"{").replace(/ }/g,"}").replace(/\s:/g,":").replace(/\n/g,"").trim()}(this.stylesheet,"#"+t),document.head.appendChild(e)}function e(){this.stylesheet&&document.getElementById("extml-style-"+this.getId()).remove()}function n(){Ext.getApplication().appContext=Ext.getApplication().appContext||{},this.appContext=Ext.getApplication().appContext;let t=this.getController(),e=this.query?this.query("*"):[];this.contextName&&(void 0!==this.appContext[this.contextName]&&console.error("A context with this name already exists: "+this.contextName,"itemId:",this.getItemId()),this.appContext[this.contextName]={},this.appContext[this.contextName][this.getItemId()]=this,e.forEach((t=>{this.appContext[this.contextName][t.getItemId()]=t,t.appContext=this.appContext}))),this.context||(this.context={},this.context[this.getItemId()]=this,e.forEach((t=>{this.context[t.getItemId()]=t,t.context=this.context}))),t&&(t.appContext=this.appContext,t.context=this.context,t.props=t.view.props)}function s(){Ext.getApplication().appContext=Ext.getApplication().appContext||{},this.contextName&&delete Ext.getApplication().appContext[this.contextName];let t=this.getItemId();Ext.getApplication().appContext[t]&&delete Ext.getApplication().appContext[t]}function i(){t.apply(this),n.apply(this)}function o(){e.apply(this),s.apply(this)}const r=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp","signal"];function l(){window.__extHtmlClass||(window.__extHtmlClass={},r.forEach((t=>function(t){let e="html-"+t;window.__extHtmlClass[e]=window.Ext.define(e,{extend:"Ext.Container",xtype:e,element:{tag:t,reference:"element"},template:[{tag:"ghost-tag",reference:"bodyElement",cls:"",uiCls:""}],getInnerHtmlElement(){return this.getRenderTarget()},listeners:[{initialize(t){requestAnimationFrame((()=>{this.el.dom.className="",this.innerElement.dom.className="",this._propsAttributes&&Object.keys(this._propsAttributes).forEach((e=>{"function"==typeof this._propsAttributes[e]&&this._propsAttributes[e].$$isState?this._propsAttributes[e].$$isState?(this.el.dom.setAttribute(e,this._propsAttributes[e]()),t.$$stateListener=this._propsAttributes[e].$$subscribe((t=>{this.el.dom.setAttribute(e,this._propsAttributes[e]())}))):this.el.dom.addEventListener(e.substring(2),this._propsAttributes[e]):this.el.dom.setAttribute(e,this._propsAttributes[e])}))}));let e=this.el.dom.childNodes[1],n=this.el.dom.childNodes[2];e&&e.remove(),n&&n.remove();let s=this.el.dom,i=this.innerElement.dom;s&&i&&(!function(){for(;i.childNodes.length>0;)s.appendChild(i.childNodes[0])}(),this.innerElement.dom=this.el.dom,i.remove())}},{destroy(t){t.$$stateListener&&t.$$stateListener()}}]})}(t))))}const a=(t,e,n,s)=>{let i;e[0]=0;for(let o=1;o<e.length;o++){const r=e[o++],l=e[o]?(e[0]|=r?1:2,n[e[o++]]):e[++o];3===r?s[0]=l:4===r?(console.log("f"),s[1]=Object.assign(s[1]||{},l)):5===r?(s[1]=s[1]||{})[e[++o]]=l:6===r?"function"==typeof l&&l.$$isState?(++o,Array.isArray(s[1][e[o]])||(s[1][e[o]]=[s[1][e[o]]],s[1][e[o]].$$isState=!0),s[1][e[o]].push(l)):s[1][e[++o]]+=l+"":r?(i=t.apply(l,a(t,l,n,["",null])),s.push(i),l[0]?e[0]|=2:(e[o-2]=0,e[o]=i)):s.push(l)}return s},p=function(t){let e,n,s=1,i="",o="",r=[0];const l=t=>{1===s&&(t||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?r.push(0,t,i):3===s&&(t||i)?(r.push(3,t,i),s=2):2===s&&"..."===i&&t?r.push(4,t,0):2===s&&i&&!t?r.push(5,0,!0,i):s>=5&&((i||!t&&5===s)&&(r.push(s,0,i,n),s=6),t&&(r.push(s,t,0,n),s=6)),i=""};for(let a=0;a<t.length;a++){a&&(1===s&&l(),l(a));for(let p=0;p<t[a].length;p++)e=t[a][p],1===s?"<"===e?(l(),r=[r],s=3):i+=e:4===s?"--"===i&&">"===e?(s=1,i=""):i=e+i[0]:o?e===o?o="":i+=e:'"'===e||"'"===e?o=e:">"===e?(l(),s=1):s&&("="===e?(s=5,n=i,i=""):"/"===e&&(s<5||">"===t[a][p+1])?(l(),3===s&&(r=r[0]),s=r,(r=r[0]).push(2,0,s),s=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(l(),s=2):i+=e),3===s&&"!--"===i&&(s=4,r=r[0])}return l(),r},c=new Map;var h=function(t){let e=c.get(this);return e||(e=new Map,c.set(this,e)),e=a(this,e.get(t)||(e.set(t,e=p(t)),e),arguments,[]),e.length>1?e:e[0]};function u(t){return t.startsWith("on")}function m(t){return t.substring(2)}function d(t,e){let n={};return n[t]=e,n}function f(t,e){t.listeners.push(e)}const g=["gridcolumn","column","templatecolumn","booleancolumn","checkcolumn","datecolumn","numbercolumn","rownumberer","textcolumn","treecolumn"];function x(t,e,n,s){let r=function(t){return{xtype:t.toLowerCase(),listeners:[d("initialize",i),d("destroy",o)]}}(t),l=Object.assign({},e,s);return!function(t){return t.startsWith("html-")}(l.xtype||t)?function(t,e){for(let n in e)if(u(n))f(t,d(m(n),e[n]));else if("controller"===n&&"function"==typeof e[n])t[n]=e[n]();else if("class"===n)t.cls=e[n];else{if("function"==typeof e[n]){let s=e[n];s.$$isState&&(t.listeners=t.listeners||[],t.listeners.push(d("initialize",(t=>{t.$$stateListener=s.$$subscribe((e=>{t[y(n)](e)}))}))),t.listeners.push(d("destroy",(t=>{t.$$stateListener&&t.$$stateListener()})))),e[n]=e[n]()}t[n]=e[n]}}(r,l):r._propsAttributes=e,function(t,e,n){e.forEach((e=>{e.xtype&&g.includes(e.xtype)?b(t,"columns",e):"menu"===e.xtype&&"button"===n?function(t,e,n){t[e]||(t[e]=n)}(t,"menu",e):e.xtype?b(t,"items",e):e.$$isState?b(t,"items",{xtype:"html-signal",html:String(e()),listeners:[d("initialize",(t=>{t.$$stateListener=e.$$subscribe((e=>{t.bodyElement.el.dom.innerHTML=String(e)}))})),d("destroy",(t=>{t.$$stateListener&&t.$$stateListener()}))]}):(t.html=t.html||"",t.html+=function(t){switch(typeof t){case"string":case"number":case"boolean":return String(t);case"function":const e=t();return"string"==typeof e||"number"==typeof e||"boolean"==typeof e?String(e):"";default:return console.warn("Unhandled value type:",t),""}}(e))}))}(r,n,t),r}function b(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function y(t){return`set${t.charAt(0).toUpperCase()}${t.slice(1)}`}function $(t){return t.startsWith("ext-")?t=t.split("ext-")[1]:t.startsWith("html-")||(t="html-"+t),t}function C(t,e,...n){return"style"===t?{isStyle:!0,content:n[0]||""}:"context"===t?{isContext:!0,props:e,children:n[0]}:"function"==typeof t?x($(t.name),t(e),n,e):x($(t),e,n)}function w(t,...e){let n=h.bind(C)(t,...e);if(n.length>1&&n[0].isStyle){let t=n[0].content;n=n[1],n.stylesheet=t}if(n.isContext){n.props=n.props||{};let t=n.props.name,e=n.stylesheet;n=n.children,n.stylesheet=e,n.contextName=t,n.isContext=!0}return n}function A(t){let e=t;const n=new Set,s=t=>(n.add(t),()=>n.delete(t)),i=()=>e;i.$$isState=!0,i.$$subscribe=s;return[i,t=>{t!==e&&(e=t,n.forEach((t=>t(e))))},s]}try{window&&l()}catch(t){}export{A as createState,o as destroy,l as generateHtmlClass,w as h,i as initialize};
